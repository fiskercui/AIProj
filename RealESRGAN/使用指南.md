# RealESRGAN 使用指南

恭喜！您已经成功完成了RealESRGAN图像放大项目的设置和测试 🎉

## 📚 快速回顾

您现在拥有一个完整的图像超分辨率工具，可以将图像无损放大2-4倍！

## 🎯 常用命令

### 1. 基础用法 - 放大单张图片

```bash
# 使用默认设置（4倍放大）
python inference.py -i inputs/your_image.jpg -o outputs/output.jpg
```

### 2. 批量处理

```bash
# 处理整个文件夹的图片
python inference.py -i inputs/ -o outputs/

# 所有图片会自动添加 _upscaled 后缀
```

### 3. 选择不同的模型

#### 通用图片（照片、风景等）
```bash
python inference.py -i inputs/photo.jpg -o outputs/photo_4x.jpg -m RealESRGAN_x4plus
```

#### 动漫/插画图片
```bash
python inference.py -i inputs/anime.png -o outputs/anime_4x.png -m RealESRGAN_x4plus_anime_6B
```

#### 2倍放大（更快，占用更少内存）
```bash
python inference.py -i inputs/image.jpg -o outputs/image_2x.jpg -m RealESRGAN_x2plus -s 2
```

### 4. GPU加速（如果有NVIDIA显卡）

```bash
# 使用GPU会大幅提升速度
python inference.py -i inputs/large_image.jpg -o outputs/output.jpg -g 0
```

## 📊 支持的图片格式

- ✅ JPG/JPEG
- ✅ PNG
- ✅ BMP
- ✅ TIFF
- ✅ WebP

## 💡 使用技巧

### 1. 内存不足怎么办？

如果遇到 "CUDA out of memory" 或处理大图片时内存不足，请修改 [`inference.py`](inference.py) 第86行：

```python
# 原来：
tile=400

# 改为：
tile=256  # 或更小的值如128
```

### 2. 如何选择合适的模型？

| 图片类型 | 推荐模型 | 放大倍数 |
|---------|---------|---------|
| 照片、风景、人物 | RealESRGAN_x4plus | 4x |
| 动漫、插画、二次元 | RealESRGAN_x4plus_anime_6B | 4x |
| 需要快速处理 | RealESRGAN_x2plus | 2x |

### 3. 提升处理速度

1. **使用GPU**：添加 `-g 0` 参数（需要NVIDIA显卡）
2. **使用2倍模型**：用 `-m RealESRGAN_x2plus -s 2` 代替4倍模型
3. **降低tile大小**：在代码中调整tile参数

## 🚀 实战示例

### 示例1：批量处理旅游照片

```bash
# 将旅游照片文件夹放入 inputs/
# 然后运行：
python inference.py -i inputs/ -o outputs/ -m RealESRGAN_x4plus -g 0
```

### 示例2：放大低分辨率头像

```bash
python inference.py -i inputs/avatar.jpg -o outputs/avatar_hd.jpg -s 4
```

### 示例3：处理动漫壁纸

```bash
python inference.py -i inputs/anime_wallpaper.png -o outputs/anime_4k.png -m RealESRGAN_x4plus_anime_6B -g 0
```

## 📁 项目文件说明

```
RealESRGAN/
├── models/                          # 预训练模型（自动下载）
│   ├── RealESRGAN_x4plus.pth       # 通用4x模型（约65MB）
│   └── RealESRGAN_x4plus_anime_6B.pth  # 动漫4x模型（约17MB）
│
├── inputs/                          # 放入要处理的图片
│   └── test_image.png              # 测试图片
│
├── outputs/                         # 输出放大后的图片
│   └── test_image_upscaled.png     # 放大后的结果
│
├── inference.py                     # 主程序
├── test_example.py                  # 创建测试图片
├── requirements.txt                 # 依赖包列表
├── README.md                        # 项目说明（英文版）
└── 使用指南.md                      # 本文件
```

## 🔧 常见问题解决

### Q1: 如何验证GPU是否在工作？
运行时如果看到 "Using GPU: 0" 就说明GPU正在使用。

### Q2: 可以自定义放大倍数吗？
可以，使用 `-s` 参数，但建议使用2或4，其他倍数可能效果不佳。

### Q3: 处理一张图片要多久？
- CPU: 200x200图片约1-2分钟
- GPU: 200x200图片约5-10秒
- 大图片时间会相应增加

## 🎓 下一步学习

1. **优化代码**: 修改 [`inference.py`](inference.py) 添加更多功能
2. **尝试其他模型**: 访问 [RealESRGAN GitHub](https://github.com/xinntao/Real-ESRGAN) 查看更多模型
3. **集成到其他项目**: 将推理代码集成到你的应用中

## 📞 需要帮助？

如果遇到问题：
1. 检查错误信息
2. 确认所有依赖都已正确安装
3. 查看 [`README.md`](README.md) 中的FAQ部分
4. 访问 RealESRGAN 官方仓库的 Issues 页面

---

**享受你的图像放大之旅！** 🎨✨
